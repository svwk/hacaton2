schema: '2.0'
stages:
  fill_na:
    cmd: python scripts/data_scripts/fill_na.py data/raw/SF_Mandarin_dataset_ver3_csv.csv
    deps:
    - path: data/raw/SF_Mandarin_dataset_ver3_csv.csv
      hash: md5
      md5: 48f64e2a2591e91487493e86a0c0881b
      size: 2263967
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    outs:
    - path: data/stage_fill_na/dataset.csv
      hash: md5
      md5: eedf003fe974b4e2fdd6b039eca79976
      size: 1894253
  data_prepare:
    cmd: python scripts/data_scripts/data_prepare.py data/stage_fill_na/dataset.csv
    deps:
    - path: data/stage_fill_na/dataset.csv
      hash: md5
      md5: eedf003fe974b4e2fdd6b039eca79976
      size: 1894253
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: 786db4bbb8f85c8f0e36d986bb6f9e6d
      size: 989
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    outs:
    - path: data/stage_data_prepare/dataset.csv
      hash: md5
      md5: 6a4e9f080c02ff0aee2c349aa172c3d6
      size: 1788605
  fix_errors:
    cmd: python scripts/data_scripts/fix_errors.py data/stage_data_prepare/dataset.csv
    deps:
    - path: data/stage_data_prepare/dataset.csv
      hash: md5
      md5: 6a4e9f080c02ff0aee2c349aa172c3d6
      size: 1788605
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: 786db4bbb8f85c8f0e36d986bb6f9e6d
      size: 989
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 42f6ae43e16f3b182d38f7524f16ee55
      size: 6182
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 1cfa8e3887fde5d06e74aed337b56152
      size: 4559
    outs:
    - path: data/stage_fix_errors/dataset.csv
      hash: md5
      md5: d5c91fe0b0281e1c918fab340e583df7
      size: 1745094
  create_features:
    cmd: python scripts/data_scripts/create_features.py data/stage_fix_errors/dataset.csv
    deps:
    - path: data/stage_fix_errors/dataset.csv
      hash: md5
      md5: d5c91fe0b0281e1c918fab340e583df7
      size: 1745094
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: 7fe352683e46693ead22baa8807686ac
      size: 11030
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: 786db4bbb8f85c8f0e36d986bb6f9e6d
      size: 989
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 42f6ae43e16f3b182d38f7524f16ee55
      size: 6182
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 1cfa8e3887fde5d06e74aed337b56152
      size: 4559
    outs:
    - path: data/stage_create_features/dataset.csv
      hash: md5
      md5: a198948d11d07ec2d8259d2475b40df5
      size: 2903001
  feature_prepare:
    cmd: python scripts/data_scripts/feature_prepare.py data/stage_create_features/dataset.csv
    deps:
    - path: data/stage_create_features/dataset.csv
      hash: md5
      md5: a198948d11d07ec2d8259d2475b40df5
      size: 2903001
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: 7fe352683e46693ead22baa8807686ac
      size: 11030
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: 786db4bbb8f85c8f0e36d986bb6f9e6d
      size: 989
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b3ed3415765c9c18b5221083f3138c0f
      size: 7063
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 42f6ae43e16f3b182d38f7524f16ee55
      size: 6182
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 1cfa8e3887fde5d06e74aed337b56152
      size: 4559
    params:
      params.yaml:
        general.bank_id: A
    outs:
    - path: data/stage_feature_prepare/dataset_A.csv
      hash: md5
      md5: d1f6b90f928bbc839bb6e4a0d7407450
      size: 2892760
    - path: models/scaler_A.pkl
      hash: md5
      md5: 573514b600e4371dbd2ef9d9266a16bd
      size: 1159
  train_test_split:
    cmd: python scripts/data_scripts/train_test_split.py data/stage_feature_prepare/dataset_A.csv
    deps:
    - path: data/stage_feature_prepare/dataset_A.csv
      hash: md5
      md5: d1f6b90f928bbc839bb6e4a0d7407450
      size: 2892760
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: 7fe352683e46693ead22baa8807686ac
      size: 11030
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: 786db4bbb8f85c8f0e36d986bb6f9e6d
      size: 989
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b3ed3415765c9c18b5221083f3138c0f
      size: 7063
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 42f6ae43e16f3b182d38f7524f16ee55
      size: 6182
    - path: scripts/data_scripts/train_test_split.py
      hash: md5
      md5: 9634d8b795cc08bb72e812fb15ac8764
      size: 2866
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 1cfa8e3887fde5d06e74aed337b56152
      size: 4559
    params:
      params.yaml:
        general.bank_id: A
        split.split_ratio: 0.3
    outs:
    - path: data/stage_train_test_split/test_A.csv
      hash: md5
      md5: 57d52b85facb0a025b820663c93380b2
      size: 855793
    - path: data/stage_train_test_split/train_A.csv
      hash: md5
      md5: 1eb7e54db34afe0096bf616dc8b0d446
      size: 1990812
  train:
    cmd: python scripts/model_scripts/xgbclassifier.py data/stage_train_test_split/train_A.csv
    deps:
    - path: data/stage_train_test_split/train_A.csv
      hash: md5
      md5: 1eb7e54db34afe0096bf616dc8b0d446
      size: 1990812
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: 7fe352683e46693ead22baa8807686ac
      size: 11030
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: 786db4bbb8f85c8f0e36d986bb6f9e6d
      size: 989
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b3ed3415765c9c18b5221083f3138c0f
      size: 7063
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 42f6ae43e16f3b182d38f7524f16ee55
      size: 6182
    - path: scripts/data_scripts/train_test_split.py
      hash: md5
      md5: 9634d8b795cc08bb72e812fb15ac8764
      size: 2866
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 1cfa8e3887fde5d06e74aed337b56152
      size: 4559
    - path: scripts/model_scripts/xgbclassifier.py
      hash: md5
      md5: 3abaa69e3cd9b34a3de6cf571210d445
      size: 2673
    params:
      params.yaml:
        general.bank_id: A
        general.train_method: xgbclassifier
        log_reg.max_iter: 15
        neural.hidden_layer_sizes_x: 6
        neural.hidden_layer_sizes_y: 2
        neural.learning_rate_init: 0.005
        neural.max_depth: 1000
        neural.verbose: true
        tree.eta: 0.01
        tree.max_depth: 50
        tree.n_estimators: 200
        tree.reg_alpha: 1
        tree.reg_lambda: 2
        tree.scale_pos_weight: 9
    outs:
    - path: models/model_xgbclassifier_A.pkl
      hash: md5
      md5: 286595515c07a62fcf3fefbbebd381fb
      size: 4310182
  evaluate:
    cmd: python scripts/model_scripts/evaluate.py data/stage_train_test_split/test_A.csv
      model_xgbclassifier_A.pkl score_xgbclassifier_A.json
    deps:
    - path: data/stage_train_test_split/test_A.csv
      hash: md5
      md5: 57d52b85facb0a025b820663c93380b2
      size: 855793
    - path: models/model_xgbclassifier_A.pkl
      hash: md5
      md5: 286595515c07a62fcf3fefbbebd381fb
      size: 4310182
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: 7fe352683e46693ead22baa8807686ac
      size: 11030
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: b2f3ceaefa0c117c3e8d7b0579c74e0e
      size: 1746
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: 786db4bbb8f85c8f0e36d986bb6f9e6d
      size: 989
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b3ed3415765c9c18b5221083f3138c0f
      size: 7063
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 08a4e8ae1306b4d3db1c97057cb215a3
      size: 1416
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 42f6ae43e16f3b182d38f7524f16ee55
      size: 6182
    - path: scripts/data_scripts/train_test_split.py
      hash: md5
      md5: 9634d8b795cc08bb72e812fb15ac8764
      size: 2866
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 1cfa8e3887fde5d06e74aed337b56152
      size: 4559
    - path: scripts/model_scripts/evaluate.py
      hash: md5
      md5: 6539e3d6542e62e476823c90fa9b9c22
      size: 2294
    - path: scripts/model_scripts/xgbclassifier.py
      hash: md5
      md5: 3abaa69e3cd9b34a3de6cf571210d445
      size: 2673
    params:
      params.yaml:
        general.bank_id: A
        general.train_method: xgbclassifier
    outs:
    - path: evaluate/score_xgbclassifier_A.json
      hash: md5
      md5: 1682e9c8042ae39fba316d2ab15f0850
      size: 32
