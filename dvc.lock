schema: '2.0'
stages:
  fill_na:
    cmd: python -m scripts.data_scripts.fill_na data/raw/SF_Mandarin_dataset_ver3_csv.csv
    deps:
    - path: data/raw/SF_Mandarin_dataset_ver3_csv.csv
      hash: md5
      md5: 48f64e2a2591e91487493e86a0c0881b
      size: 2263967
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    outs:
    - path: data/stage_fill_na/dataset.csv
      hash: md5
      md5: f4954ca67a388cf81fdafbe790020f33
      size: 1887649
  data_prepare:
    cmd: python -m scripts.data_scripts.data_prepare data/stage_fill_na/dataset.csv
    deps:
    - path: data/stage_fill_na/dataset.csv
      hash: md5
      md5: f4954ca67a388cf81fdafbe790020f33
      size: 1887649
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: d534ed72933df013a7a95fc80fd250ad
      size: 957
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    outs:
    - path: data/stage_data_prepare/dataset.csv
      hash: md5
      md5: 721884eb6032dbfbb95cb636462576df
      size: 1782001
  fix_errors:
    cmd: python -m scripts.data_scripts.fix_errors data/stage_data_prepare/dataset.csv
    deps:
    - path: data/stage_data_prepare/dataset.csv
      hash: md5
      md5: 721884eb6032dbfbb95cb636462576df
      size: 1782001
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: d534ed72933df013a7a95fc80fd250ad
      size: 957
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 53401ecac5c04a926942f6b3ce1d4f87
      size: 6030
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 52215c60915e0ba4ac5bd7c027bb897e
      size: 4454
    outs:
    - path: data/stage_fix_errors/dataset.csv
      hash: md5
      md5: a7832d03e61e4f2aada55b9dcd4637c1
      size: 1795738
  create_features:
    cmd: python -m scripts.data_scripts.create_features data/stage_fix_errors/dataset.csv
    deps:
    - path: data/stage_fix_errors/dataset.csv
      hash: md5
      md5: a7832d03e61e4f2aada55b9dcd4637c1
      size: 1795738
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: aa0a943cf406477d7e105b9de1a34ffa
      size: 13121
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: d534ed72933df013a7a95fc80fd250ad
      size: 957
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 53401ecac5c04a926942f6b3ce1d4f87
      size: 6030
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 52215c60915e0ba4ac5bd7c027bb897e
      size: 4454
    outs:
    - path: data/stage_create_features/dataset.csv
      hash: md5
      md5: 15962b449f5152e94dc3a484d2a9fdad
      size: 3110740
  feature_prepare:
    cmd: python -m scripts.data_scripts.feature_prepare data/stage_create_features/dataset.csv
    deps:
    - path: data/stage_create_features/dataset.csv
      hash: md5
      md5: 15962b449f5152e94dc3a484d2a9fdad
      size: 3110740
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: aa0a943cf406477d7e105b9de1a34ffa
      size: 13121
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: d534ed72933df013a7a95fc80fd250ad
      size: 957
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b8d51e75df2cb5b1e2b54e59728d3b50
      size: 6820
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 53401ecac5c04a926942f6b3ce1d4f87
      size: 6030
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 52215c60915e0ba4ac5bd7c027bb897e
      size: 4454
    params:
      params.yaml:
        general.bank_id: E
    outs:
    - path: data/stage_feature_prepare/dataset_E.csv
      hash: md5
      md5: 549518d0007dc33bcafa240b1b49be23
      size: 3261991
    - path: models/scaler_E.pkl
      hash: md5
      md5: 8a0b7d24e23bd95396d8a9f09da44d30
      size: 1159
  train_test_split:
    cmd: python -m scripts.data_scripts.train_test_split data/stage_feature_prepare/dataset_E.csv
    deps:
    - path: data/stage_feature_prepare/dataset_E.csv
      hash: md5
      md5: 549518d0007dc33bcafa240b1b49be23
      size: 3261991
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: aa0a943cf406477d7e105b9de1a34ffa
      size: 13121
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: d534ed72933df013a7a95fc80fd250ad
      size: 957
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b8d51e75df2cb5b1e2b54e59728d3b50
      size: 6820
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 53401ecac5c04a926942f6b3ce1d4f87
      size: 6030
    - path: scripts/data_scripts/train_test_split.py
      hash: md5
      md5: 1b774b8228aa69034c23ae2edb0f6d69
      size: 2795
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 52215c60915e0ba4ac5bd7c027bb897e
      size: 4454
    params:
      params.yaml:
        general.bank_id: E
        split.split_ratio: 0.3
    outs:
    - path: data/stage_train_test_split/test_E.csv
      hash: md5
      md5: 4994822e7a26e685a2dc4700976a4a1f
      size: 967059
    - path: data/stage_train_test_split/train_E.csv
      hash: md5
      md5: b3c7517c493c94fcc7a87ce8218a7355
      size: 2249858
  train:
    cmd: python -m scripts.model_scripts.xgbclassifier data/stage_train_test_split/train_E.csv
    deps:
    - path: data/stage_train_test_split/train_E.csv
      hash: md5
      md5: b3c7517c493c94fcc7a87ce8218a7355
      size: 2249858
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: aa0a943cf406477d7e105b9de1a34ffa
      size: 13121
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: d534ed72933df013a7a95fc80fd250ad
      size: 957
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b8d51e75df2cb5b1e2b54e59728d3b50
      size: 6820
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 53401ecac5c04a926942f6b3ce1d4f87
      size: 6030
    - path: scripts/data_scripts/train_test_split.py
      hash: md5
      md5: 1b774b8228aa69034c23ae2edb0f6d69
      size: 2795
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 52215c60915e0ba4ac5bd7c027bb897e
      size: 4454
    - path: scripts/model_scripts/train.py
      hash: md5
      md5: 5d919fe242cffc5362da2b594625b06b
      size: 1595
    - path: scripts/model_scripts/xgbclassifier.py
      hash: md5
      md5: 49fbace4bec9462080e7bcf90e073663
      size: 2593
    params:
      params.yaml:
        general.bank_id: E
        general.train_method: xgbclassifier
        log_reg.max_iter: 15
        neural.hidden_layer_sizes_x: 6
        neural.hidden_layer_sizes_y: 2
        neural.learning_rate_init: 0.005
        neural.max_depth: 1000
        neural.verbose: true
        tree.eta: 0.01
        tree.max_depth: 50
        tree.n_estimators: 200
        tree.reg_alpha: 1
        tree.reg_lambda: 2
        tree.scale_pos_weight: 9
    outs:
    - path: models/model_xgbclassifier_E.pkl
      hash: md5
      md5: eda1bb279dec437ea7dd1acac04b910c
      size: 4840500
  evaluate:
    cmd: python -m scripts.model_scripts.evaluate data/stage_train_test_split/test_E.csv
      model_xgbclassifier_E.pkl score_xgbclassifier_E.json
    deps:
    - path: data/stage_train_test_split/test_E.csv
      hash: md5
      md5: 4994822e7a26e685a2dc4700976a4a1f
      size: 967059
    - path: models/model_xgbclassifier_E.pkl
      hash: md5
      md5: eda1bb279dec437ea7dd1acac04b910c
      size: 4840500
    - path: scripts/data_scripts/create_features.py
      hash: md5
      md5: aa0a943cf406477d7e105b9de1a34ffa
      size: 13121
    - path: scripts/data_scripts/data_methods.py
      hash: md5
      md5: a3e0a65b5adcf83fa09e1dc11ff83986
      size: 1701
    - path: scripts/data_scripts/data_prepare.py
      hash: md5
      md5: d534ed72933df013a7a95fc80fd250ad
      size: 957
    - path: scripts/data_scripts/feature_prepare.py
      hash: md5
      md5: b8d51e75df2cb5b1e2b54e59728d3b50
      size: 6820
    - path: scripts/data_scripts/fill_na.py
      hash: md5
      md5: 125d4612bb4507456a4f1da125ec9b18
      size: 1375
    - path: scripts/data_scripts/fix_errors.py
      hash: md5
      md5: 53401ecac5c04a926942f6b3ce1d4f87
      size: 6030
    - path: scripts/data_scripts/train_test_split.py
      hash: md5
      md5: 1b774b8228aa69034c23ae2edb0f6d69
      size: 2795
    - path: scripts/data_scripts/utils/seniority_cats.py
      hash: md5
      md5: 52215c60915e0ba4ac5bd7c027bb897e
      size: 4454
    - path: scripts/model_scripts/evaluate.py
      hash: md5
      md5: 30c3a1aa8ef48d9a99428dccadc120f0
      size: 2231
    - path: scripts/model_scripts/xgbclassifier.py
      hash: md5
      md5: 49fbace4bec9462080e7bcf90e073663
      size: 2593
    params:
      params.yaml:
        general.bank_id: E
        general.train_method: xgbclassifier
    outs:
    - path: evaluate/score_xgbclassifier_E.json
      hash: md5
      md5: 5fbe011e9b0a2751c3323f44d4f9d924
      size: 32
